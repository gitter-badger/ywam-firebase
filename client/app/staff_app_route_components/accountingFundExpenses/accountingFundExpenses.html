
<div layout="row" layout-align="center">

<div flex-gt-xs="90" flex>

<md-card>
  <md-card-content layout-gt-md="row">

<div flex>
 <b> Bills To Be Paid {{$ctrl.start_date |date :'MMMM d'}} - {{$ctrl.end_date |date : 'MMMM d'}}</b>

<div layout="row">
<div flex="50">Item</div>
<div flex>Due Date</div>
<div flex="10" >Fund </div>
<div flex="15">Amount</div>
</div>  
<div  ng-repeat="(date ,bills) in $ctrl.scheduled_bills" ng-class="{'redbar':date < $ctrl.today}" >
  
 <div ng-repeat="(key,bill) in bills"  ng-if="!bill.compleated">
   <div layout="row"  ng-class="{'overdue':date < $ctrl.today}"> 
      <div flex="50"><md-checkbox style="margin-bottom:2px" ng-click="$ctrl.fulfillCommitment(date, key)" aria-label="checkbox" ></md-checkbox>
        {{bill.name}}</div>
      <div flex>{{date | date:'MMMM d'}}</div>
      <div flex="15">{{bill.fund_id}}</div>
      <div flex="15" style="text-align:right ;">{{bill.fixed_amount | number:0}} <span ng-if="!bill.fixed_amount">{{bill.low_amount |number:0}} ~ {{bill.high_amount |number:0}}</span> </div>
   </div>
   <md-divider></md-divider>
 </div>
  </div>



</div>

<div style="border-left:2px solid black; margin-left:20px; width:20px;" ></div>


<div flex>
 <b> Bills Paid</b>
 <div layout="row">
<div flex="50">Item</div>
<div flex>Due Date</div>
<div flex="10" >Fund </div>
<div flex="15">Amount</div>
</div>  
<div flex ng-repeat="(date ,bills) in $ctrl.scheduled_bills" >
 <div ng-repeat="(key,bill) in bills"  ng-if="bill.compleated && date >= $ctrl.start_of_month"> 
   <div layout="row"> 
      <md-checkbox style="margin-bottom:2px" ng-click="$ctrl.fulfillCommitment(date, key)" ng-checked="true" aria-label="checkbox" ></md-checkbox>
      <div flex="50">{{bill.name}}</div>
      <div flex>{{date | date:'MMMM d'}}</div>
      <div flex="15">{{bill.fund_id}}</div>
      <div flex="15" style="text-align:right ;">{{bill.fixed_amount |number:0}} <span ng-if="!bill.fixed_amount">{{bill.low_amount |number:0}} ~ {{bill.high_amount |number:0}}</span> </div>
   </div>
   <md-divider></md-divider>   
 </div>
  </div>
</div>

  </md-card-content>
</md-card>
<!--  
<md-card  ng-repeat="(fund_id,fund) in $ctrl.funds" ng-if="fund.commitments" >
  <md-card-content>
    <h1 class="md-title">{{fund.meta.name}}</h1>

<!--Commitments 
<md-button ng-click="$ctrl.addbtn($event,fund_id)" >Add</md-button>

<div layout="row" >
 
<div flex>
<div layout="row">
  <div flex="50">Item </div>
  <div flex>Due by </div>
  <div flex>Amount</div>
</div>
<div ng-repeat="(commitment_id,item) in fund.commitments" ng-if="!item.fulfillments[$ctrl.this_month].compleated">
 <div layout="row" ng-class="{'overdue':item.due_by < $ctrl.day_of_month}">

   <div flex="50" >
     <md-checkbox style="margin-bottom:2px" ng-click="$ctrl.fulfillCommitment(fund_id, commitment_id)" aria-label="checkbox" ></md-checkbox>
     <a ng-click="$ctrl.editDialog($event, fund_id, commitment_id)"> {{item.name}}</a> </div>
   
   <div flex >{{$ctrl.this_month_text }} {{item.due_by}}</div>
   <div flex> {{item.reocurr}}</div>
   <b flex ng-if="item.fixed_amount"> {{item.fixed_amount}}   </b>
  <b flex ng-if="!item.fixed_amount"> {{item.low_amount |number:0}} ~ {{item.high_amount |number:0}}  </b>

   
 </div>
  <md-divider></md-divider>
</div>


<div>


<div ng-repeat="(commitment_id,item) in fund.commitments" ng-if="!item.fulfillments[$ctrl.next_month].compleated && item.due_by < $ctrl.look_out_days">
 <div layout="row" >

   <div flex="50" >
     <md-checkbox style="margin-bottom:2px" ng-click="$ctrl.fulfillCommitment(fund_id, commitment_id, $ctrl.next_month)" aria-label="checkbox" ></md-checkbox>
     <a ng-click="$ctrl.editDialog($event, fund_id, commitment_id)"> {{item.name}}</a> </div>
   
   <div flex >{{$ctrl.next_month_text}}  {{item.due_by}}</div>
   <div flex> {{item.reocurr}}</div>
   <b flex ng-if="item.fixed_amount"> {{item.fixed_amount}}   </b>
  <b flex ng-if="!item.fixed_amount"> {{item.low_amount |number:0}} ~ {{item.high_amount |number:0}}  </b>

   
 </div>
  <md-divider></md-divider>
 
</div>
</div>
<br>
<div layout="row">
  <div flex>
Bills: {{$ctrl.this_month_text}} 1 - {{$ctrl.next_month_text}} {{$ctrl.look_out_days}}
  </div>
  <b> {{$ctrl.currencySym }} 
  <span style="background: linear-gradient(to right, rgba(0,0,255,0.5) , rgba(255,0,0,0.5));">
  {{fund.upcoming_bills_low | number:0}} ~
   {{fund.upcoming_bills_high | number:0}}
  </span>
  </b>
</div>


<div layout="row">
<div flex>
  Current Fund Balance (as of {{fund.balance.last_update | date:'short'}})
</div>
<div>
  {{fund.balance.current}}
</div>
</div>

<div layout="row">
<div flex>
  Estimate after all payments 
</div>
<div>
  {{fund.balance.current - fund.upcoming_bills_high |number:2 }}
</div>
</div>

</div>
<div style="border-left:2px solid black; margin-left:20px; width:20px;" ></div>

<div flex>
<div layout="row">
  <div flex="50">Item </div>
  <div flex>Due by </div>
  <div flex>Amount</div>
</div>
<div ng-repeat="(commitment_id,item) in fund.commitments" ng-if="item.fulfillments[$ctrl.this_month].compleated">
 <div layout="row">
  <div > <md-checkbox aria-label="checkbox" style="margin-bottom:2px" ng-checked="true" disabled></md-checkbox></div>
   <div flex="50" ><a ng-click="$ctrl.editDialog($event, fund_id, commitment_id)"> {{item.name}}</a> </div>
  
   <div flex> {{item.due_by}}</div>
   <div flex> {{item.reocurr}}</div>
   <!--<div flex> {{item.fulfillments}}</div>
   <b flex> {{item.fixed_amount}}</b>
 </div>
  <md-divider></md-divider>
</div>
Already paid this month: <b>{{$ctrl.currencySym }}{{fund.stats[$ctrl.this_month].commitments_paid_amount}}</b>


</div>


</div>



  </md-card-content>
</md-card>-->

<md-card flex="50">
  <md-card-content>
 <div layout="row"><div flex >All Bills: </div><div> {{$ctrl.currencySym }} 
  <span style="background: linear-gradient(to right, rgba(0,0,255,0.5) , rgba(255,0,0,0.5));">
  {{$ctrl.total_low | number:0}} ~
   {{$ctrl.total_high | number:0}}
  </span>
  </div>
 </div>
 <md-divider></md-divider>
  <br>
    <div ng-repeat="fund in $ctrl.funds"  ng-if="fund.balance.current">
      <div layout="row">
      <div flex >{{fund.meta.name}}</div> 
      <div flex style="font-size:80%"> last update {{fund.balance.last_update |  date:'short'}} </div> 
      <div flex="15" style="text-align:right"> {{fund.balance.current}}</div> 
       </div>
<md-divider></md-divider>
     </div>  
    <div layout="row">
      <div flex > 
    All Funds Current Balances: </div>
    <div flex="15" style="text-align:right"> {{$ctrl.total_balances | number:2}} </div>
    </div>
      
      <br>
   <div layout="row">
      <div flex > 
    <b >Estimate After All payments: </b></div>
    <div flex style="text-align:right"> <b> {{$ctrl.currencySym }}  {{$ctrl.total_balances - $ctrl.total_high | number:2}}</b></div>




  </md-card-content>
</md-card>
</div>
</div>